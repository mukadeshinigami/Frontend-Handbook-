# Блок 1: Основы синтаксиса и первая программа

## Цель

Написать первую программу на C, понять базовый синтаксис, научиться компилировать код и освоить основные концепции языка.

---

## 1. Установка компилятора

### Что такое C?

C — системный язык программирования, созданный Деннисом Ритчи в 1972 году. Это язык низкого уровня с прямым доступом к памяти, который используется для создания операционных систем, драйверов, встраиваемых систем и производительных приложений.

### Установка GCC (GNU Compiler Collection)

**Для Linux:**
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install build-essential

# Fedora/RHEL
sudo dnf install gcc
```

**Для macOS:**
```bash
# Через Homebrew
brew install gcc

# Или используйте Clang (установлен по умолчанию)
clang --version
```

**Для Windows:**
- Скачайте MinGW-w64 с [mingw-w64.org](https://www.mingw-w64.org/)
- Или установите через MSYS2
- Или используйте WSL (Windows Subsystem for Linux)

### Альтернатива: Clang

Clang — компилятор от LLVM, часто используется как альтернатива GCC:

```bash
# Linux
sudo apt-get install clang

# macOS (обычно установлен)
clang --version

# Windows
# Установите через Visual Studio Build Tools или MSYS2
```

### Проверка установки

```bash
gcc --version
# или
clang --version
```

---

## 2. Структура программы на C

### Минимальная программа

Каждая программа на C начинается с функции `main()`. Это точка входа программы.

**hello.c:**
```c
#include <stdio.h>

int main(void) {
    printf("Hello, World!\n");
    return 0;
}
```

### Разбор структуры

1. **`#include <stdio.h>`** — директивы препроцессора
   - Подключает стандартную библиотеку ввода-вывода
   - Позволяет использовать функции `printf()`, `scanf()` и другие

2. **`int main(void)`** — функция `main`
   - `int` — тип возвращаемого значения (код возврата программы)
   - `main` — имя функции (обязательное)
   - `(void)` — параметры функции (пусто, но можно использовать `int main(int argc, char *argv[])` для аргументов командной строки)
   - `{ }` — тело функции

3. **`printf("Hello, World!\n");`** — вызов функции
   - `printf()` — функция для форматированного вывода
   - `"Hello, World!\n"` — строка (литерал)
   - `\n` — символ новой строки
   - `;` — точка с запятой (обязательна в конце инструкции)

4. **`return 0;`** — возврат значения
   - `0` — код успешного завершения (необязательно в C99+ для `main`, но хорошая практика)

---

## 3. Компиляция программы

### Простая компиляция

```bash
gcc hello.c
```

Это создаст исполняемый файл `a.out` (на Linux/macOS) или `a.exe` (на Windows).

### Компиляция с указанием имени выходного файла

```bash
gcc hello.c -o hello
```

Опция `-o` указывает имя выходного файла.

### Запуск программы

**Linux/macOS:**
```bash
./hello
```

**Windows:**
```cmd
hello.exe
```

### Полезные флаги компиляции

```bash
# Показать все предупреждения
gcc -Wall hello.c -o hello

# Включить отладочную информацию
gcc -g hello.c -o hello

# Оптимизация (уровень 2)
gcc -O2 hello.c -o hello

# Указать стандарт C (C99, C11, C17)
gcc -std=c11 hello.c -o hello

# Комбинация флагов (рекомендуется)
gcc -Wall -g -std=c11 hello.c -o hello
```

### Этапы компиляции

1. **Препроцессинг** — обработка директив `#include`, `#define`
2. **Компиляция** — перевод C кода в ассемблер
3. **Ассемблирование** — перевод ассемблера в объектный код
4. **Линковка** — связывание объектных файлов и библиотек

Можно посмотреть отдельные этапы:
```bash
# Только препроцессинг
gcc -E hello.c -o hello.i

# Только компиляция (без линковки)
gcc -c hello.c -o hello.o

# Линковка
gcc hello.o -o hello
```

---

## 4. Переменные

### Объявление переменных

В C переменные нужно объявлять перед использованием:

```c
#include <stdio.h>

int main(void) {
    int age;           // Объявление переменной
    age = 25;          // Присваивание значения
    
    int count = 10;    // Объявление с инициализацией
    
    printf("Age: %d\n", age);
    printf("Count: %d\n", count);
    
    return 0;
}
```

### Базовые типы данных

#### Целые числа

```c
int number = 42;           // Целое число (обычно 32 бита)
short small = 100;         // Короткое целое (обычно 16 бит)
long big = 1000000L;       // Длинное целое (обычно 32 или 64 бита)
long long huge = 1000000LL; // Очень длинное (64 бита)
```

#### Вещественные числа

```c
float pi = 3.14f;          // Одинарная точность (32 бита)
double e = 2.71828;        // Двойная точность (64 бита) - по умолчанию
long double precise = 3.141592653589793238L; // Расширенная точность
```

#### Символы

```c
char letter = 'A';         // Один символ
char newline = '\n';       // Специальные символы
```

#### Булевы значения

В старых версиях C нет типа `bool`. Используют `int` (0 = false, не-0 = true).
В C99+ можно использовать `#include <stdbool.h>`:

```c
#include <stdbool.h>

bool is_active = true;
bool is_done = false;
```

---

## 5. Константы

### Константы с ключевым словом `const`

```c
const int MAX_SIZE = 100;
const float PI = 3.14159f;
const char NEWLINE = '\n';

// const переменная не может быть изменена после инициализации
// MAX_SIZE = 200; // ❌ Ошибка компиляции
```

### Константы через `#define`

Макросы препроцессора (без точки с запятой):

```c
#define MAX_SIZE 100
#define PI 3.14159
#define NEWLINE '\n'

// Можно использовать в любом месте кода
int array[MAX_SIZE];
```

**Разница между `const` и `#define`:**
- `const` — переменная компилятора (имеет тип, область видимости)
- `#define` — подстановка текста препроцессором (нет типа, нет области видимости)

### Соглашения об именовании констант

Обычно используют `UPPER_CASE`:

```c
#define MAX_BUFFER_SIZE 1024
const int MAX_CONNECTIONS = 100;
```

---

## 6. Комментарии

### Однострочные комментарии (C99+)

```c
// Это однострочный комментарий
int x = 5; // Комментарий после кода
```

### Многострочные комментарии

```c
/* Это многострочный комментарий
   который может занимать
   несколько строк */

int x = /* встроенный комментарий */ 5;
```

**Важно:** Некоторые компиляторы поддерживают вложенные `/* */`, но это не гарантировано стандартом.

### Хорошие практики комментариев

```c
// Плохой комментарий (очевидное)
int x = 5; // Присваиваем 5 переменной x

// Хороший комментарий (объясняет "почему")
// Используем 1024 как размер буфера, так как это стандартный размер страницы
int buffer_size = 1024;

// Документационные комментарии (для функций)
/* Вычисляет факториал числа n.
 * Возвращает -1 если n < 0.
 */
int factorial(int n);
```

---

## 7. Функция printf() — форматированный вывод

### Базовое использование

```c
#include <stdio.h>

int main(void) {
    printf("Hello, World!\n");
    return 0;
}
```

### Спецификаторы формата

`printf()` использует спецификаторы формата для вывода значений:

```c
int age = 25;
float height = 175.5f;
char letter = 'A';
char name[] = "Alice";

printf("Age: %d\n", age);              // %d для int
printf("Height: %.2f\n", height);      // %f для float, .2 = 2 знака после запятой
printf("Letter: %c\n", letter);        // %c для char
printf("Name: %s\n", name);            // %s для строк
```

### Основные спецификаторы

| Спецификатор | Тип | Описание |
|--------------|-----|----------|
| `%d` или `%i` | `int` | Десятичное целое число |
| `%u` | `unsigned int` | Беззнаковое целое |
| `%f` | `float`/`double` | Вещественное число |
| `%e` или `%E` | `float`/`double` | Научная нотация |
| `%g` или `%G` | `float`/`double` | Автоматический выбор формата |
| `%c` | `char` | Один символ |
| `%s` | `char*` | Строка |
| `%p` | `void*` | Указатель (адрес) |
| `%x` или `%X` | `int` | Шестнадцатеричное (нижний/верхний регистр) |
| `%o` | `int` | Восьмеричное |
| `%%` | — | Символ процента |

### Модификаторы формата

```c
int num = 42;
float pi = 3.14159f;

printf("%5d\n", num);        // Минимальная ширина 5: "   42"
printf("%-5d\n", num);       // Выравнивание влево: "42   "
printf("%05d\n", num);       // Заполнение нулями: "00042"
printf("%.2f\n", pi);        // 2 знака после запятой: "3.14"
printf("%10.2f\n", pi);      // Ширина 10, 2 знака: "      3.14"
```

### Примеры форматирования

```c
#include <stdio.h>

int main(void) {
    int age = 25;
    float height = 175.5f;
    char name[] = "Alice";
    
    printf("Name: %s, Age: %d, Height: %.1f cm\n", name, age, height);
    printf("Decimal: %d, Hex: 0x%x, Octal: %o\n", 255, 255, 255);
    printf("Scientific: %e\n", 1234.5678);
    printf("Percent sign: %%\n");
    
    return 0;
}
```

**Вывод:**
```
Name: Alice, Age: 25, Height: 175.5 cm
Decimal: 255, Hex: 0xff, Octal: 377
Scientific: 1.234568e+03
Percent sign: %
```

---

## 8. Функция scanf() — форматированный ввод

### Базовое использование

```c
#include <stdio.h>

int main(void) {
    int age;
    float height;
    char name[50];
    
    printf("Enter your name: ");
    scanf("%s", name);
    
    printf("Enter your age: ");
    scanf("%d", &age);  // Обратите внимание на & (адрес переменной)
    
    printf("Enter your height: ");
    scanf("%f", &height);
    
    printf("Name: %s, Age: %d, Height: %.1f\n", name, age, height);
    
    return 0;
}
```

### Важные моменты

1. **Оператор `&` (адрес)** — нужен для всех типов, кроме строк (`char[]`)
   - `&age` — адрес переменной `age`
   - Без `&` компилятор выдаст предупреждение или ошибку

2. **Безопасность** — `scanf()` не проверяет границы буфера для строк
   - `scanf("%s", name)` — может переполнить буфер
   - Лучше: `scanf("%49s", name)` — ограничить размер

3. **Пробелы** — `%s` останавливается на первом пробеле
   - Для ввода строк с пробелами используйте `fgets()`

### Спецификаторы scanf()

Аналогичны `printf()`, но есть отличия:

```c
int num;
float decimal;
char ch;
char str[100];

scanf("%d", &num);           // int
scanf("%f", &decimal);       // float
scanf("%lf", &decimal);      // double (нужен %lf, а не %f!)
scanf("%c", &ch);            // char
scanf("%s", str);            // строка (без &)
scanf("%49s", str);          // строка с ограничением длины
```

### Ввод нескольких значений

```c
int day, month, year;
scanf("%d/%d/%d", &day, &month, &year);
// Ввод: 25/12/2025
```

---

## 9. Арифметические операции

### Базовые операции

```c
#include <stdio.h>

int main(void) {
    int a = 10, b = 3;
    
    printf("a + b = %d\n", a + b);   // Сложение: 13
    printf("a - b = %d\n", a - b);   // Вычитание: 7
    printf("a * b = %d\n", a * b);   // Умножение: 30
    printf("a / b = %d\n", a / b);   // Целочисленное деление: 3
    printf("a %% b = %d\n", a % b);  // Остаток от деления: 1 (%% для вывода %)
    
    // Для вещественного деления нужно использовать float/double
    float x = 10.0f, y = 3.0f;
    printf("x / y = %.2f\n", x / y); // 3.33
    
    return 0;
}
```

### Составные операторы присваивания

```c
int x = 5;

x += 3;   // x = x + 3 → 8
x -= 2;   // x = x - 2 → 6
x *= 2;   // x = x * 2 → 12
x /= 3;   // x = x / 3 → 4
x %= 3;   // x = x % 3 → 1
```

### Инкремент и декремент

```c
int x = 5;

// Префиксный инкремент (увеличивает, затем использует)
int y = ++x;  // x = 6, y = 6

// Постфиксный инкремент (использует, затем увеличивает)
x = 5;
int z = x++;  // z = 5, x = 6

// Аналогично для декремента
int a = 5;
int b = --a;  // a = 4, b = 4

int c = 5;
int d = c--;  // d = 5, c = 4
```

---

## 10. Полный пример программы

### Программа-калькулятор

```c
#include <stdio.h>

int main(void) {
    float num1, num2;
    float result;
    
    printf("=== Simple Calculator ===\n");
    
    // Ввод данных
    printf("Enter first number: ");
    scanf("%f", &num1);
    
    printf("Enter second number: ");
    scanf("%f", &num2);
    
    // Вычисления
    result = num1 + num2;
    printf("%.2f + %.2f = %.2f\n", num1, num2, result);
    
    result = num1 - num2;
    printf("%.2f - %.2f = %.2f\n", num1, num2, result);
    
    result = num1 * num2;
    printf("%.2f * %.2f = %.2f\n", num1, num2, result);
    
    if (num2 != 0) {
        result = num1 / num2;
        printf("%.2f / %.2f = %.2f\n", num1, num2, result);
    } else {
        printf("Division by zero is not allowed!\n");
    }
    
    return 0;
}
```

---

## Резюме Блока 1

### Что мы изучили:

✅ Установка компилятора (GCC, Clang)  
✅ Структура программы на C (`#include`, `main()`)  
✅ Компиляция: `gcc hello.c -o hello`  
✅ Переменные: объявление и инициализация  
✅ Базовые типы: `int`, `float`, `double`, `char`, `bool`  
✅ Константы: `const` и `#define`  
✅ Комментарии: `//` и `/* */`  
✅ Форматированный ввод-вывод: `printf()`, `scanf()`  
✅ Арифметические операции и операторы  
✅ Инкремент и декремент  

### Следующие шаги:

Переходите к `01-basics-practice.md` для выполнения практических заданий!

---

## Полезные ресурсы

- [C Reference (cppreference.com)](https://en.cppreference.com/w/c)
- [GCC Documentation](https://gcc.gnu.org/onlinedocs/)
- "The C Programming Language" (K&R) — классическая книга
- [Learn C](https://www.learn-c.org/) — интерактивный туториал

---

## Типичные ошибки новичков

1. **Забыли `#include <stdio.h>`**
   ```c
   // ❌ Ошибка: необъявленный идентификатор 'printf'
   int main(void) {
       printf("Hello\n");
   }
   ```

2. **Забыли точку с запятой**
   ```c
   int x = 5  // ❌ Ошибка: ожидается ';'
   ```

3. **Использование `=` вместо `==` в условиях** (будет в следующем уроке)

4. **Забыли `&` в `scanf()`**
   ```c
   int x;
   scanf("%d", x);  // ❌ Ошибка: нужен &x
   ```

5. **Использование `%f` для `double` в `scanf()`**
   ```c
   double x;
   scanf("%f", &x);   // ❌ Неправильно
   scanf("%lf", &x);  // ✅ Правильно
   ```

