<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>05 — Contact Form · Frontend Handbook</title>
    <style>
      :root{--bg:#fbfcfe;--card:#fff;--muted:#6b7280;--accent:#0ea5a0;--error:#ef4444;--success:#22c55e}
      *{box-sizing:border-box}
      body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:#0b1220;padding:2rem}
      .container{max-width:600px;margin:0 auto}
      h1{margin:0 0 .25rem;font-size:1.25rem}
      .lead{color:var(--muted);margin:0 0 2rem}

      /* form */
      form{background:var(--card);padding:2rem;border-radius:12px;box-shadow:0 6px 24px rgba(12,18,31,0.08)}

      /* form-group */
      .form-group{margin-bottom:1.5rem;display:flex;flex-direction:column}
      .form-group:last-of-type{margin-bottom:0}

      label{font-weight:600;margin-bottom:.5rem;display:block}
      .required::after{content:" *";color:var(--error)}

      input,textarea,select{
        font-family:inherit;
        font-size:1rem;
        padding:.75rem;
        border:2px solid rgba(10,20,30,0.1);
        border-radius:6px;
        transition:border-color .2s;
        width:100%
      }

      input:hover,textarea:hover,select:hover{
        border-color:rgba(10,20,30,0.2)
      }

      input:focus,textarea:focus,select:focus{
        outline:0;
        border-color:var(--accent);
        box-shadow:0 0 0 3px rgba(14,165,160,0.1)
      }

      input[type="radio"],input[type="checkbox"]{
        width:auto;
        margin-right:.5rem;
        cursor:pointer
      }

      /* validation states */
      input:invalid:not(:placeholder-shown),
      textarea:invalid:not(:placeholder-shown){
        border-color:var(--error)
      }

      input:valid:not(:placeholder-shown),
      textarea:valid:not(:placeholder-shown){
        border-color:var(--success)
      }

      .error-message{
        color:var(--error);
        font-size:.875rem;
        margin-top:.25rem;
        display:none
      }

      input:invalid:not(:placeholder-shown) ~ .error-message,
      textarea:invalid:not(:placeholder-shown) ~ .error-message{
        display:block
      }

      .helper-text{
        color:var(--muted);
        font-size:.875rem;
        margin-top:.25rem
      }

      /* radio/checkbox группы */
      .radio-group,.checkbox-group{
        display:flex;
        flex-direction:column;
        gap:.75rem;
        margin-top:.5rem
      }

      .radio-group label,.checkbox-group label{
        display:flex;
        align-items:center;
        margin-bottom:0;
        font-weight:400;
        cursor:pointer
      }

      /* button */
      button{
        background:var(--accent);
        color:#fff;
        border:0;
        padding:.75rem 1.5rem;
        border-radius:6px;
        font-size:1rem;
        font-weight:600;
        cursor:pointer;
        transition:background .2s,transform .1s;
        margin-top:1rem
      }

      button:hover{background:#0d9995}
      button:active{transform:scale(0.98)}
      button:disabled{background:var(--muted);cursor:not-allowed;opacity:0.5}

      /* success message */
      .success-message{
        background:rgba(34,197,94,0.1);
        border:1px solid var(--success);
        padding:1rem;
        border-radius:6px;
        margin-bottom:1.5rem;
        display:none;
        color:#15803d
      }

      .success-message.show{display:block}

      /* fieldset */
      fieldset{border:2px solid rgba(10,20,30,0.1);border-radius:6px;padding:1rem;margin-bottom:1.5rem}
      legend{padding:0 .5rem;font-weight:600;color:#0b1220}

      /* responsive */
      @media (max-width:600px){
        .container{padding:0}
        form{padding:1.5rem;border-radius:8px}
        input,textarea,select{padding:.625rem}
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>05 — Contact Form</h1>
        <p class="lead">Правильная разметка форм с доступностью, валидацией и UX.</p>
      </header>

      <div class="success-message" id="successMsg">
        ✓ Спасибо! Ваше сообщение отправлено. Мы свяжемся с вами в ближайшее время.
      </div>

      <form id="contactForm" novalidate>
        <!-- text input -->
        <div class="form-group">
          <label for="name" class="required">Ваше имя</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            placeholder="Иван Петров"
            required
            minlength="2"
            maxlength="50"
          >
          <div class="error-message">Имя должно быть от 2 до 50 символов</div>
          <p class="helper-text">Минимум 2 символа</p>
        </div>

        <!-- email -->
        <div class="form-group">
          <label for="email" class="required">Email</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="ivan@example.com"
            required
          >
          <div class="error-message">Пожалуйста, введите корректный email</div>
        </div>

        <!-- phone -->
        <div class="form-group">
          <label for="phone">Телефон</label>
          <input 
            type="tel" 
            id="phone" 
            name="phone" 
            placeholder="+7 (999) 123-45-67"
            pattern="[+]?[0-9\s\-\(\)]+"
          >
          <div class="error-message">Неправильный формат телефона</div>
          <p class="helper-text">Опциональное поле</p>
        </div>

        <!-- select -->
        <div class="form-group">
          <label for="subject" class="required">Тема обращения</label>
          <select id="subject" name="subject" required>
            <option value="">— Выберите тему —</option>
            <option value="support">Техподдержка</option>
            <option value="sales">Вопрос о продажах</option>
            <option value="feedback">Обратная связь</option>
            <option value="other">Другое</option>
          </select>
          <div class="error-message">Пожалуйста, выберите тему</div>
        </div>

        <!-- radio buttons -->
        <fieldset>
          <legend>Тип обращения</legend>
          <div class="radio-group">
            <label>
              <input type="radio" name="type" value="question" required>
              Вопрос
            </label>
            <label>
              <input type="radio" name="type" value="complaint">
              Жалоба
            </label>
            <label>
              <input type="radio" name="type" value="suggestion">
              Предложение
            </label>
          </div>
        </fieldset>

        <!-- checkboxes -->
        <fieldset>
          <legend>Интересуемые услуги</legend>
          <div class="checkbox-group">
            <label>
              <input type="checkbox" name="services" value="consultation">
              Консультация
            </label>
            <label>
              <input type="checkbox" name="services" value="development">
              Разработка
            </label>
            <label>
              <input type="checkbox" name="services" value="support">
              Поддержка
            </label>
          </div>
        </fieldset>

        <!-- textarea -->
        <div class="form-group">
          <label for="message" class="required">Сообщение</label>
          <textarea 
            id="message" 
            name="message" 
            placeholder="Расскажите о вашей проблеме или вопросе..."
            rows="5"
            required
            minlength="10"
            maxlength="1000"
          ></textarea>
          <div class="error-message">Сообщение должно быть от 10 до 1000 символов</div>
          <p class="helper-text">От 10 до 1000 символов</p>
        </div>

        <!-- acceptance checkbox -->
        <div class="form-group">
          <label>
            <input type="checkbox" name="agree" required>
            <span class="required">Я согласен с политикой конфиденциальности</span>
          </label>
          <div class="error-message">Вы должны согласиться с политикой</div>
        </div>

        <!-- buttons -->
        <div style="display:flex;gap:1rem">
          <button type="submit">Отправить</button>
          <button type="reset">Очистить</button>
        </div>
      </form>
    </div>

    <script>
      (function(){
        const form = document.getElementById('contactForm');
        const successMsg = document.getElementById('successMsg');

        // Валидация при потере фокуса
        form.querySelectorAll('input, textarea, select').forEach(field => {
          field.addEventListener('blur', () => {
            validateField(field);
          });
        });

        // Валидация поля
        function validateField(field) {
          const isValid = field.checkValidity();
          const errorMsg = field.nextElementSibling;
          
          if (!isValid && field.value) {
            if (errorMsg?.classList.contains('error-message')) {
              errorMsg.style.display = 'block';
            }
          }
        }

        // Обработка отправки формы
        form.addEventListener('submit', (e) => {
          e.preventDefault();

          // Проверяем валидность всех полей
          if (!form.checkValidity()) {
            alert('Пожалуйста, исправьте ошибки в форме.');
            return;
          }

          // Собираем данные
          const formData = new FormData(form);
          const data = Object.fromEntries(formData);

          console.log('Отправленные данные:', data);

          // Показываем сообщение об успехе
          successMsg.classList.add('show');
          form.reset();
          successMsg.scrollIntoView({ behavior: 'smooth' });

          // Скрываем сообщение через 5 секунд
          setTimeout(() => {
            successMsg.classList.remove('show');
          }, 5000);
        });

        // Логирование при изменении
        form.querySelectorAll('input, textarea, select').forEach(field => {
          field.addEventListener('change', () => {
            console.log(`Изменилось ${field.name}:`, field.value);
          });
        });
      })();
    </script>
  </body>
</html>
